<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>Ball Emitter</title>

<script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
<script>var zon = true; // true for comments from zim code</script>
<script src="http://d309knd7es5f10.cloudfront.net/zim_5.js"></script>
<script src="http://d309knd7es5f10.cloudfront.net/game_1.0.2.js"></script>
<script src="http://d309knd7es5f10.cloudfront.net/pizzazz_01.js"></script>
<!-- use zimjs.com/code/distill for minified individual functions! -->

<style>
    body {background-color:#111;}
</style>

<script>

var scaling = "fit";
var width = 1024;
var height = 768;
var frame = new zim.Frame(scaling, width, height);
frame.on("ready", function() {
    zog("ready from ZIM Frame");

    var stage = frame.stage;
    var stageW = frame.width;
    var stageH = frame.height;
    frame.color = "black";




    // create a sink that will attract the particles and create an orbit
    var sink = new zim.Circle(10, frame.pink).centerReg(stage).mov(0,-50).alp(0);

    // create the particles with a zim.Emitter
    var particles = new zim.Emitter({

         obj:[
            new zim.Circle(20,null,frame.darker,2),
            new zim.Rectangle(30,30,null,frame.darker,2),
            new zim.Triangle(40,40,40,null,frame.darker,2)
        ],

        random:{color:[frame.green, frame.white, frame.blue]},

        width:stageW,
        height:stageH,
        trace:false, // default
        cache:zim.mobile(), // default
        interval:150,
        life:9000,
        decayTime:5000,
        sink:sink,
        sinkForce:1,
        gravity:0,
        minForce:1,
        maxForce:2,
        minAngle:-45,
        maxAngle:180+45,
        shrink:false, // we are drawing in a shape with registration point of 0,0 so do not shrink
        layers:"top", // default
        events:false, // default
        startPaused:true
    })
        .centerReg(stage)
        .scale(2);


   // var circle = new Circle(50, "red", "#666", 10)
   //                  .addPhysics()
   //                  .pos(500, 500)
   //                  .addTo(stage);
   //  physics.drag()



    // var button = new zim.Button({
    //     width:300,
    //     height:150,
    //     })
    //     .centerReg(stage);


    var circle = new zim.Circle(50, "red")
        .centerReg(stage);


    circle.on("mousedown", function() {
        circle.animate({obj:{alpha:0}, time:500, call:function(){circle.removeFrom(stage);}});
        particles.pause(false); // unpause particles
        circle.enabled = false;
        zim.timeout({min:10000, max:20000}, function(){
            particles.pause();
            zim.timeout(6000, function() {
                circle.addTo(stage)
                circle.animate({obj:{alpha:.8}, time:1500, call:function(){circle.enabled = true;}});
            });
        });
    });



    stage.update(); // update the stage to see any changes

}); // end of ready
</script>
</head>

<body>
<!-- canvas with id="myCanvas" is made by zim Frame -->
</body>
</html>
